# ๐ง ุฅุตูุงุญ ูุดููุฉ "ุฎุฏูุฉ ุงูุชุนุฑู ูุดุบููุฉ" - SpeechRecognizer

**ุชุงุฑูุฎ ุงูุชุตุญูุญ**: ููููุจุฑ 2025

---

## โ ุงููุดููุฉ

ูุงูุช ุชุธูุฑ ุฑุณุงูุฉ **"ุฎุฏูุฉ ุงูุชุนุฑู ูุดุบููุฉ"** ุนูุฏ ูุญุงููุฉ ุงุณุชุฎุฏุงู ููุฒุฉ "ุตูุช ุฅูู ุฅุดุงุฑุฉ".

### ุงูุฃุณุจุงุจ:
1. SpeechRecognizer ูุดุบูู ุจุชุดุบูู ุณุงุจู
2. ูุญุงููุฉ ุจุฏุก ุงุณุชูุงุน ุฌุฏูุฏ ูุจู ุงูุชูุงุก ุงูุณุงุจู
3. ุนุฏู ุฅุฏุงุฑุฉ ุงูุญุงูุฉ ุจุดูู ุตุญูุญ

---

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. โ ุฅุฏุงุฑุฉ ุญุงูุฉ "ูุดุบูู"
- ุฅุถุงูุฉ `isRecognizerBusy` flag
- ุงูุชุญูู ูู ุงูุญุงูุฉ ูุจู ุงูุจุฏุก
- ููุน ุงูุจุฏุก ุงููุชุนุฏุฏ

### 2. โ ูุนุงูุฌุฉ ERROR_RECOGNIZER_BUSY
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุชููุงุฆูุงู ุจุนุฏ 500ms
- ุนุฏู ุฅุธูุงุฑ ุฑุณุงูุฉ ุฎุทุฃ ูููุณุชุฎุฏู
- ุฅูุบุงุก ุฃู ุงุณุชูุงุน ุฌุงุฑู ูุจู ุงูุจุฏุก

### 3. โ ุชุญุณูู ุจุฏุก ุงูุงุณุชูุงุน
- ุฅูุบุงุก ุฃู ุงุณุชูุงุน ุฌุงุฑู ุฃููุงู
- ุชุฃุฎูุฑ 200ms ูุจู ุงูุจุฏุก ุงูุฌุฏูุฏ
- ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

### 4. โ ุชูุธูู ุฃูุถู
- ุฅูุบุงุก ุฌููุน callbacks ุนูุฏ onDispose
- ุฅููุงู ูุฅูุบุงุก ุงูุงุณุชูุงุน ูุจู ุงูุชุฏููุฑ
- ููุน ุชุณุฑูุจ ุงูุฐุงูุฑุฉ

---

## ๐ ุงูุชุบููุฑุงุช ูู ุงูููุฏ

### ูุจู:
```kotlin
override fun onError(error: Int) {
    when (error) {
        SpeechRecognizer.ERROR_RECOGNIZER_BUSY -> {
            viewModel.onSpeechError("ุฎุฏูุฉ ุงูุชุนุฑู ูุดุบููุฉ")
        }
        // ...
    }
}

fun startListening() {
    val intent = Intent(...)
    speechRecognizer.startListening(intent)
}
```

### ุจุนุฏ:
```kotlin
var isRecognizerBusy by remember { mutableStateOf(false) }

override fun onError(error: Int) {
    isRecognizerBusy = false
    
    when (error) {
        SpeechRecognizer.ERROR_RECOGNIZER_BUSY -> {
            // Retry automatically - don't show error
            handler.postDelayed({
                if (audioPermissionState.status.isGranted) {
                    startListeningInternal(speechRecognizer)
                }
            }, 500)
            return
        }
        // ...
    }
}

fun startListeningInternal(recognizer: SpeechRecognizer) {
    // Cancel any ongoing recognition
    try {
        recognizer.cancel()
    } catch (e: Exception) {
        // Ignore if already stopped
    }
    
    // Wait before starting new recognition
    handler.postDelayed({
        val intent = Intent(...)
        recognizer.startListening(intent)
    }, 200)
}
```

---

## ๐ ุงูุชุญุณููุงุช

### 1. ุฅุฏุงุฑุฉ ุงูุญุงูุฉ
- โ `isRecognizerBusy` - ุชุชุจุน ุญุงูุฉ ุงูุงุณุชูุงุน
- โ ุงูุชุญูู ูุจู ุงูุจุฏุก
- โ ููุน ุงูุจุฏุก ุงููุชุนุฏุฏ

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- โ Retry ุชููุงุฆู ูู ERROR_RECOGNIZER_BUSY
- โ ุฑุณุงุฆู ุฎุทุฃ ุฃูุถุญ
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก ุงููุฎุชููุฉ

### 3. ุจุฏุก ุงูุงุณุชูุงุน
- โ ุฅูุบุงุก ุงูุงุณุชูุงุน ุงูุฌุงุฑู ุฃููุงู
- โ ุชุฃุฎูุฑ ูุจู ุงูุจุฏุก ุงูุฌุฏูุฏ
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

### 4. ุงูุชูุธูู
- โ ุฅูุบุงุก callbacks ุนูุฏ onDispose
- โ ุฅููุงู ูุฅูุบุงุก ูุจู ุงูุชุฏููุฑ
- โ ููุน ุชุณุฑูุจ ุงูุฐุงูุฑุฉ

---

## ๐ฏ ุงููุชูุฌุฉ

### โ ุจุนุฏ ุงูุฅุตูุงุญ:
- โ ูุง ุชุธูุฑ ุฑุณุงูุฉ "ุฎุฏูุฉ ุงูุชุนุฑู ูุดุบููุฉ"
- โ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุชููุงุฆูุงู
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- โ ุฃุฏุงุก ูุญุณูู

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ููุชุญูู ูู ุงูุฅุตูุงุญ:
1. โ ุงูุชุญ ุงูุชุทุจูู
2. โ ุงุฐูุจ ุฅูู "ุตูุช ุฅูู ุฅุดุงุฑุฉ"
3. โ ุงุถุบุท ุนูู ุงููููุฑูููู
4. โ ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฑุณุงูุฉ "ูุดุบููุฉ"
5. โ ุฌุฑุจ ุนุฏุฉ ูุฑุงุช ูุชุชุงููุฉ
6. โ ูุฌุจ ุฃู ูุนูู ุจุดูู ุตุญูุญ

---

## ๐ ุญู ุงููุดุงูู

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
1. **ุชุญูู ูู Logcat**:
   ```bash
   adb logcat | grep SpeechRecognizer
   ```

2. **ุชุญูู ูู ุงูุฅุฐู**:
   - Settings โ Apps โ HandSpeak โ Permissions
   - ุชุฃูุฏ ูู ููุญ ุฅุฐู ุงููููุฑูููู

3. **ุชุญูู ูู ุงูุฅูุชุฑูุช**:
   - SpeechRecognizer ูุญุชุงุฌ ุงุชุตุงู ุจุงูุฅูุชุฑูุช
   - ุชุฃูุฏ ูู ูุฌูุฏ ุงุชุตุงู

4. **ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู**:
   - ุฃุญูุงูุงู ุชุญุชุงุฌ ุฅุนุงุฏุฉ ุชุดุบูู ุจุนุฏ ุงูุชุญุฏูุซ

---

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

- โ `VoiceToSignScreen.kt` - ุชุญุณููุงุช ุดุงููุฉ

---

## ๐ก ูุตุงุฆุญ ุฅุถุงููุฉ

### ูุชุญุณูู ุงูุฃุฏุงุก:
1. โ ูุง ุชุถุบุท ุนูู ุงููููุฑูููู ุนุฏุฉ ูุฑุงุช ุจุณุฑุนุฉ
2. โ ุงูุชุธุฑ ุงูุชูุงุก ุงูุงุณุชูุงุน ูุจู ุงูุจุฏุก ูุฑุฉ ุฃุฎุฑู
3. โ ุชุฃูุฏ ูู ูุฌูุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช

### ูุญู ูุดุงูู ุฃุฎุฑู:
1. **ูุง ูุชู ุงูุชุนุฑู ุนูู ุงูููุงู**: ุชุญุฏุซ ุจูุถูุญ ูุจุจุทุก
2. **ุฎุทุฃ ูู ุงูุดุจูุฉ**: ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
3. **ูุง ููุฌุฏ ุฅุฐู**: ุงููุญ ุฅุฐู ุงููููุฑูููู ูู ุงูุฅุนุฏุงุฏุงุช

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููููุจุฑ 2025  
**ุงูุญุงูุฉ**: โ **ุชู ุงูุฅุตูุงุญ**

